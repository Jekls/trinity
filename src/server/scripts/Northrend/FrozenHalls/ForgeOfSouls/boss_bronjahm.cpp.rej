***************
*** 133,139 ****
  
                  events.Update(diff);
  
-                 if (me->hasUnitState(UNIT_STAT_CASTING))
                      return;
  
                  while (uint32 eventId = events.ExecuteEvent())
--- 133,139 ----
  
                  events.Update(diff);
  
+                 if (me->HasUnitState(UNIT_STAT_CASTING))
                      return;
  
                  while (uint32 eventId = events.ExecuteEvent())
