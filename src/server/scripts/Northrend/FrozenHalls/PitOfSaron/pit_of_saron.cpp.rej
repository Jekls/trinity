***************
*** 186,192 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 186,192 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 244,250 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 244,250 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 306,312 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 306,312 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 373,379 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 373,379 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 432,438 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 432,438 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 499,505 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 499,505 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 561,567 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 561,567 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 624,630 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 624,630 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 689,695 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 689,695 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 745,751 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 745,751 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 803,809 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 803,809 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 868,874 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 868,874 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 930,936 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 930,936 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 988,994 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 988,994 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 1050,1056 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 1050,1056 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
***************
*** 1108,1114 ****
  
              events.Update(diff);
  
-             if (me->hasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
--- 1108,1114 ----
  
              events.Update(diff);
  
+             if (me->HasUnitState(UNIT_STAT_CASTING))
                  return;
  
              while (uint32 eventId = events.ExecuteEvent())
