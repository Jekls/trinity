***************
*** 6868,6919 ****
              //  [15..28] Horde honor titles and player name
              //  [29..38] Other title and player name
              //  [39+]    Nothing
-             // PLAYER__FIELD_KNOWN_TITLES describe which titles player can use,
-             // so we must find biggest pvp title , even for killer to find extra honor value
-             uint32 vtitle = pVictim->GetUInt32Value(PLAYER__FIELD_KNOWN_TITLES);
-             uint32 victim_title = 0;
-             uint32 ktitle = GetUInt32Value(PLAYER__FIELD_KNOWN_TITLES);
-             uint32 killer_title = 0;
-             if (PLAYER_TITLE_MASK_ALL_PVP & ktitle)
-             {
-                 for (int i = ((GetTeam() == ALLIANCE) ? 1:HKRANKMAX);i!=((GetTeam() == ALLIANCE) ? HKRANKMAX : (2*HKRANKMAX-1));i++)
-                 {
-                     if (ktitle & (1<<i))
-                         killer_title = i;
-                 }
-             }
-             if (PLAYER_TITLE_MASK_ALL_PVP & vtitle)
-             {
-                 for (int i = ((pVictim->GetTeam() == ALLIANCE) ? 1:HKRANKMAX);i!=((pVictim->GetTeam() == ALLIANCE) ? HKRANKMAX : (2*HKRANKMAX-1));i++)
-                 {
-                     if (vtitle & (1<<i))
-                         victim_title = i;
-                 }
-             }
-             // Get Killer titles, CharTitlesEntry::bit_index
              // Ranks:
              //  title[1..14]  -> rank[5..18]
              //  title[15..28] -> rank[5..18]
              //  title[other]  -> 0
              if (victim_title == 0)
-                 victim_guid = 0;                        // Don't show HK: <rank> message, only log.]
-             else if (victim_title < HKRANKMAX)
                  victim_rank = victim_title + 4;
-             else if (victim_title < (2*HKRANKMAX-1))
-                 victim_rank = victim_title - (HKRANKMAX-1) + 4;
              else
                  victim_guid = 0;                        // Don't show HK: <rank> message, only log.
-  
-             // now find rank difference
-             if (killer_title == 0 && victim_rank>4)
-                 rank_diff = victim_rank - 4;
-             else if (killer_title < HKRANKMAX)
-                 rank_diff = (victim_rank>(killer_title + 4))? (victim_rank - (killer_title + 4)) : 0;
-             else if (killer_title < (2*HKRANKMAX-1))
-                 rank_diff = (victim_rank>(killer_title - (HKRANKMAX-1) +4))? (victim_rank - (killer_title - (HKRANKMAX-1) + 4)) : 0;
  
              honor_f = ceil(Trinity::Honor::hk_honor_at_level_f(k_level) * (v_level - k_grey) / (k_level - k_grey));
-             honor_f = 1 + sWorld.getRate(RATE_PVP_RANK_EXTRA_HONOR)*(((float)rank_diff) / 10.0f);
  
              // count the number of playerkills in one day
              ApplyModUInt32Value(PLAYER_FIELD_KILLS, 1, true);
--- 6867,6888 ----
              //  [15..28] Horde honor titles and player name
              //  [29..38] Other title and player name
              //  [39+]    Nothing
+             uint32 victim_title = pVictim->GetUInt32Value(PLAYER_CHOSEN_TITLE);
+                                                         // Get Killer titles, CharTitlesEntry::bit_index
              // Ranks:
              //  title[1..14]  -> rank[5..18]
              //  title[15..28] -> rank[5..18]
              //  title[other]  -> 0
              if (victim_title == 0)
+                 victim_guid = 0;                        // Don't show HK: <rank> message, only log.
+             else if (victim_title < 15)
                  victim_rank = victim_title + 4;
+             else if (victim_title < 29)
+                 victim_rank = victim_title - 14 + 4;
              else
                  victim_guid = 0;                        // Don't show HK: <rank> message, only log.
  
              honor_f = ceil(Trinity::Honor::hk_honor_at_level_f(k_level) * (v_level - k_grey) / (k_level - k_grey));
  
              // count the number of playerkills in one day
              ApplyModUInt32Value(PLAYER_FIELD_KILLS, 1, true);
